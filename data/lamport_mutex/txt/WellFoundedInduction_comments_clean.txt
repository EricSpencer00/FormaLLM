Modification History
Last modified Thu Feb 13 18:14:56 GMT-03:00 2014 by merz
Last modified Sun Jan 01 18:39:23 CET 2012 by merz
Last modified Wed Nov 23 10:13:18 PST 2011 by lamport
**************************************************************************)
This module contains useful theorems for inductive proofs and recursive *)
definitions based on a well-founded ordering.                           *)
*)
Most of the statements of the theorems are decomposed in terms of       *)
definitions.  This is done for two reasons:                             *)
*)
- It makes it easier for the backends to instantiate the theorems      *)
when those definitions are not expanded.  In fact, at the moment     *)
the provers can't prove any of those theorems from the theorem       *)
itself if the definitions are made usable.                           *)
*)
- It can be convenient when writing proofs to use those definitions    *)
rather than having to write out their expansions.                    *)
*)
A relation is represented as a set of ordered pairs, where we write     *)
<<x, y>> \in R instead of x R y.  It is more convenient to represent    *)
relations this way rather than as operators such as < .                 *)
*)
Proofs of these theorems appear in module WellFoundedInduction_proofs.  *)
**************************************************************************)
**************************************************************************)
The following defines what it means for a relation R to be transitively *)
closed on a set S.  In this and other definitions, we think of R as a   *)
relation on S, meaning that it is a subset of S \X S.  However, this is *)
not necessary.  Our results do not require this as a hypothesis, and it *)
is often convenient to apply them when R is a relation on a set         *)
containing S as a subset.  They're even true (though uninteresting) if  *)
R and S \X S are disjoint sets.                                         *)
**************************************************************************)
**************************************************************************)
If we think of R as a less-than relation, then R is well founded on S   *)
iff there is no "infinitely descending" sequence of elements of S.  The *)
canonical example of a well founded relation is the ordinary less-than  *)
relation on the natural numbers.                                        *)
*)
A S with a well-founded ordering is often called well-ordered.          *)
**************************************************************************)
**************************************************************************)
If we think of R as a less-than relation on S, then the following is    *)
the set of elements of S that are less than x.                          *)
**************************************************************************)
**************************************************************************)
If we think of R as a less-than relation on S, then R is well-founded   *)
iff every non-empty subset of S has a minimal element.                  *)
**************************************************************************)
**************************************************************************)
The two following lemmas are simple consequences of theorem WFMin.      *)
**************************************************************************)
**************************************************************************)
The following lemmas are simple facts about operator SetLessThan.       *)
**************************************************************************)
**************************************************************************)
The following theorem is the basis for proof by induction over a        *)
well-founded set.  It generalizes theorem GeneralNatInduction of module *)
NaturalsInduction.                                                      *)
**************************************************************************)
**************************************************************************)
Theorem WFInductiveDef below justifies recursive definitions based on a *)
well-founded ordering.  We first prove it with the hypothesis that the  *)
ordering is transitively closed.  We prove the theorem for an arbitrary *)
well-founded relation by applying the special case to its transitive    *)
closure.                                                                *)
**************************************************************************)
**************************************************************************)
The following defines the transitive closure of the relation R on S.    *)
More precisely, it is the transitive closure of the restriction of R    *)
to S.  We give an abstract definition of transitive closure as the      *)
smallest relation that contains R (restricted to S \X S) and that is    *)
transitively closed, then prove some relevant properties.               *)
**************************************************************************)
**************************************************************************)
The following lemmas are consequences of the two previous ones. The     *)
first three state closure properties of transitive closure, the fourth  *)
lemma allows one to chop off a step in the underlying relation for any  *)
pair in the transitive closure.                                         *)
**************************************************************************)
**************************************************************************)
Theorem WFInductiveDef allows us to conclude that a recursively defined *)
function satisfies its recursion equation.  The following result allows *)
us to deduce the range of this function.                                *)
**************************************************************************)
**************************************************************************)
Below are some theorems that allow us to derive some useful             *)
well-founded relations from a given well-founded relation.  First, we   *)
define the operator OpToRel that constructs a relation (a set of        *)
ordered pairs) from a relation expressed as an operator.                *)
**************************************************************************)
**************************************************************************)
To construct well-founded relations from the less-than relation on the  *)
natural numbers, we first prove that it is well-founded.                *)
**************************************************************************)
**************************************************************************)
The next definition would be easier to read if we used the TLA+         *)
construct {<<x, y>> \in T : ...  }.  However, TLAPS does not support     *)
that notation.  (It's meaning is rather complicated in the general case *)
when T is not a Cartesian product of sets.)                             *)
**************************************************************************)
**************************************************************************)
We now prove that the lexicographical ordering on the Cartesian product *)
of two well-ordered sets is well-ordered.                               *)
**************************************************************************)
**************************************************************************)
The preceding theorem generalizes in the obvious way to the Cartesian   *)
product of a finite number of well-ordered sets.  However, the          *)
statement of the general theorem is rather complicated, so we state it  *)
for the most useful case: the Cartesian product of n copies of the same *)
set.                                                                    *)
**************************************************************************)